<template>
  <div class="w-slider">
    <div class="w-slides">
      <div class="w-slide">
        <div class="container">
          <div class="w-slider__background w-slider__background_blue">
            <svg width="446" height="1080" viewBox="0 0 446 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M-21.539 504.277L201.886 -3.7995C203.718 -9.34276 207.265 -14.1437 212.012 -17.5059C216.759 -20.8681 222.46 -22.6168 228.287 -22.498C234.114 -22.3793 239.765 -20.3991 244.42 -16.8453C249.074 -13.2915 252.49 -8.34889 254.172 -2.73401L464.023 514.096C486.99 560.548 455.981 576.243 433.471 565.67C389.717 531.292 323.756 507.256 248.239 501.19C256.779 497.074 264.141 490.867 269.65 483.135C324.916 394.698 255.146 345.329 223.885 261.913C190.493 343.904 119.416 390.601 172.33 481.153C177.485 488.891 184.448 495.248 192.606 499.663L193.374 500.098C118.256 503.159 52.009 524.564 7.49065 556.91C-15.3566 566.812 -45.721 549.795 -21.539 504.277Z" fill="#fff"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M-41.2512 683.625C-105.378 816.032 -117.659 967.783 -80.8019 981.925C-36.1024 998.938 -48.6139 948.338 11.7348 970.319C72.0835 992.3 93.7677 1127.05 212.951 1135.12C332.355 1131.86 357.49 998.169 418.454 978.504C479.419 958.838 465.609 1008.94 510.635 993.615C547.747 981.095 539.486 828.95 478.965 694.024C434.065 593.982 350.41 552.059 247.224 544.251C263.817 557.314 279.009 594.028 272.371 699.683C263.144 847.219 232.578 920.68 215.689 920.113C198.801 919.546 170.211 845.321 164.885 697.513C161.069 591.629 177.157 555.579 194.138 543.166C91.0013 546.934 6.23919 585.451 -41.2512 683.625Z" fill="#fff"/>
            </svg>
          </div>
        </div>
      </div>
      <div class="w-slide">
        <div class="container">
            <div class="w-slider__background w-slider__background_yellow">
              <svg width="446" height="1080" viewBox="0 0 446 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-21.539 504.277L201.886 -3.7995C203.718 -9.34276 207.265 -14.1437 212.012 -17.5059C216.759 -20.8681 222.46 -22.6168 228.287 -22.498C234.114 -22.3793 239.765 -20.3991 244.42 -16.8453C249.074 -13.2915 252.49 -8.34889 254.172 -2.73401L464.023 514.096C486.99 560.548 455.981 576.243 433.471 565.67C389.717 531.292 323.756 507.256 248.239 501.19C256.779 497.074 264.141 490.867 269.65 483.135C324.916 394.698 255.146 345.329 223.885 261.913C190.493 343.904 119.416 390.601 172.33 481.153C177.485 488.891 184.448 495.248 192.606 499.663L193.374 500.098C118.256 503.159 52.009 524.564 7.49065 556.91C-15.3566 566.812 -45.721 549.795 -21.539 504.277Z" fill="#fff"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-41.2512 683.625C-105.378 816.032 -117.659 967.783 -80.8019 981.925C-36.1024 998.938 -48.6139 948.338 11.7348 970.319C72.0835 992.3 93.7677 1127.05 212.951 1135.12C332.355 1131.86 357.49 998.169 418.454 978.504C479.419 958.838 465.609 1008.94 510.635 993.615C547.747 981.095 539.486 828.95 478.965 694.024C434.065 593.982 350.41 552.059 247.224 544.251C263.817 557.314 279.009 594.028 272.371 699.683C263.144 847.219 232.578 920.68 215.689 920.113C198.801 919.546 170.211 845.321 164.885 697.513C161.069 591.629 177.157 555.579 194.138 543.166C91.0013 546.934 6.23919 585.451 -41.2512 683.625Z" fill="#fff"/>
              </svg>
            </div>
        </div>
      </div>
      <div class="w-slide">
        <div class="container">
            <div class="w-slider__background w-slider__background_purple">
              <svg width="446" height="1080" viewBox="0 0 446 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-21.539 504.277L201.886 -3.7995C203.718 -9.34276 207.265 -14.1437 212.012 -17.5059C216.759 -20.8681 222.46 -22.6168 228.287 -22.498C234.114 -22.3793 239.765 -20.3991 244.42 -16.8453C249.074 -13.2915 252.49 -8.34889 254.172 -2.73401L464.023 514.096C486.99 560.548 455.981 576.243 433.471 565.67C389.717 531.292 323.756 507.256 248.239 501.19C256.779 497.074 264.141 490.867 269.65 483.135C324.916 394.698 255.146 345.329 223.885 261.913C190.493 343.904 119.416 390.601 172.33 481.153C177.485 488.891 184.448 495.248 192.606 499.663L193.374 500.098C118.256 503.159 52.009 524.564 7.49065 556.91C-15.3566 566.812 -45.721 549.795 -21.539 504.277Z" fill="#fff"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-41.2512 683.625C-105.378 816.032 -117.659 967.783 -80.8019 981.925C-36.1024 998.938 -48.6139 948.338 11.7348 970.319C72.0835 992.3 93.7677 1127.05 212.951 1135.12C332.355 1131.86 357.49 998.169 418.454 978.504C479.419 958.838 465.609 1008.94 510.635 993.615C547.747 981.095 539.486 828.95 478.965 694.024C434.065 593.982 350.41 552.059 247.224 544.251C263.817 557.314 279.009 594.028 272.371 699.683C263.144 847.219 232.578 920.68 215.689 920.113C198.801 919.546 170.211 845.321 164.885 697.513C161.069 591.629 177.157 555.579 194.138 543.166C91.0013 546.934 6.23919 585.451 -41.2512 683.625Z" fill="#fff"/>
              </svg>
            </div>
        </div>
      </div>
      <div class="w-slide">
        <div class="container">
            <div class="w-slider__background w-slider__background_red">
              <svg width="446" height="1080" viewBox="0 0 446 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-21.539 504.277L201.886 -3.7995C203.718 -9.34276 207.265 -14.1437 212.012 -17.5059C216.759 -20.8681 222.46 -22.6168 228.287 -22.498C234.114 -22.3793 239.765 -20.3991 244.42 -16.8453C249.074 -13.2915 252.49 -8.34889 254.172 -2.73401L464.023 514.096C486.99 560.548 455.981 576.243 433.471 565.67C389.717 531.292 323.756 507.256 248.239 501.19C256.779 497.074 264.141 490.867 269.65 483.135C324.916 394.698 255.146 345.329 223.885 261.913C190.493 343.904 119.416 390.601 172.33 481.153C177.485 488.891 184.448 495.248 192.606 499.663L193.374 500.098C118.256 503.159 52.009 524.564 7.49065 556.91C-15.3566 566.812 -45.721 549.795 -21.539 504.277Z" fill="#fff"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-41.2512 683.625C-105.378 816.032 -117.659 967.783 -80.8019 981.925C-36.1024 998.938 -48.6139 948.338 11.7348 970.319C72.0835 992.3 93.7677 1127.05 212.951 1135.12C332.355 1131.86 357.49 998.169 418.454 978.504C479.419 958.838 465.609 1008.94 510.635 993.615C547.747 981.095 539.486 828.95 478.965 694.024C434.065 593.982 350.41 552.059 247.224 544.251C263.817 557.314 279.009 594.028 272.371 699.683C263.144 847.219 232.578 920.68 215.689 920.113C198.801 919.546 170.211 845.321 164.885 697.513C161.069 591.629 177.157 555.579 194.138 543.166C91.0013 546.934 6.23919 585.451 -41.2512 683.625Z" fill="#fff"/>
              </svg>
            </div>
        </div>
      </div>
      <div class="w-slide">
        <div class="container">
            <div class="w-slider__background w-slider__background_dark-yellow">
              <svg width="446" height="1080" viewBox="0 0 446 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-21.539 504.277L201.886 -3.7995C203.718 -9.34276 207.265 -14.1437 212.012 -17.5059C216.759 -20.8681 222.46 -22.6168 228.287 -22.498C234.114 -22.3793 239.765 -20.3991 244.42 -16.8453C249.074 -13.2915 252.49 -8.34889 254.172 -2.73401L464.023 514.096C486.99 560.548 455.981 576.243 433.471 565.67C389.717 531.292 323.756 507.256 248.239 501.19C256.779 497.074 264.141 490.867 269.65 483.135C324.916 394.698 255.146 345.329 223.885 261.913C190.493 343.904 119.416 390.601 172.33 481.153C177.485 488.891 184.448 495.248 192.606 499.663L193.374 500.098C118.256 503.159 52.009 524.564 7.49065 556.91C-15.3566 566.812 -45.721 549.795 -21.539 504.277Z" fill="#fff"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-41.2512 683.625C-105.378 816.032 -117.659 967.783 -80.8019 981.925C-36.1024 998.938 -48.6139 948.338 11.7348 970.319C72.0835 992.3 93.7677 1127.05 212.951 1135.12C332.355 1131.86 357.49 998.169 418.454 978.504C479.419 958.838 465.609 1008.94 510.635 993.615C547.747 981.095 539.486 828.95 478.965 694.024C434.065 593.982 350.41 552.059 247.224 544.251C263.817 557.314 279.009 594.028 272.371 699.683C263.144 847.219 232.578 920.68 215.689 920.113C198.801 919.546 170.211 845.321 164.885 697.513C161.069 591.629 177.157 555.579 194.138 543.166C91.0013 546.934 6.23919 585.451 -41.2512 683.625Z" fill="#fff"/>
              </svg>
            </div>
        </div>
      </div>
      <div class="w-slide">
        <div class="container">
            <div class="w-slider__background w-slider__background_dark-blue">
              <svg width="446" height="1080" viewBox="0 0 446 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-21.539 504.277L201.886 -3.7995C203.718 -9.34276 207.265 -14.1437 212.012 -17.5059C216.759 -20.8681 222.46 -22.6168 228.287 -22.498C234.114 -22.3793 239.765 -20.3991 244.42 -16.8453C249.074 -13.2915 252.49 -8.34889 254.172 -2.73401L464.023 514.096C486.99 560.548 455.981 576.243 433.471 565.67C389.717 531.292 323.756 507.256 248.239 501.19C256.779 497.074 264.141 490.867 269.65 483.135C324.916 394.698 255.146 345.329 223.885 261.913C190.493 343.904 119.416 390.601 172.33 481.153C177.485 488.891 184.448 495.248 192.606 499.663L193.374 500.098C118.256 503.159 52.009 524.564 7.49065 556.91C-15.3566 566.812 -45.721 549.795 -21.539 504.277Z" fill="#fff"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-41.2512 683.625C-105.378 816.032 -117.659 967.783 -80.8019 981.925C-36.1024 998.938 -48.6139 948.338 11.7348 970.319C72.0835 992.3 93.7677 1127.05 212.951 1135.12C332.355 1131.86 357.49 998.169 418.454 978.504C479.419 958.838 465.609 1008.94 510.635 993.615C547.747 981.095 539.486 828.95 478.965 694.024C434.065 593.982 350.41 552.059 247.224 544.251C263.817 557.314 279.009 594.028 272.371 699.683C263.144 847.219 232.578 920.68 215.689 920.113C198.801 919.546 170.211 845.321 164.885 697.513C161.069 591.629 177.157 555.579 194.138 543.166C91.0013 546.934 6.23919 585.451 -41.2512 683.625Z" fill="#fff"/>
              </svg>
            </div>
        </div>
      </div>
      <div class="w-slide">
        <div class="container">
            <div class="w-slider__background w-slider__background_gray">
              <svg width="446" height="1080" viewBox="0 0 446 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-21.539 504.277L201.886 -3.7995C203.718 -9.34276 207.265 -14.1437 212.012 -17.5059C216.759 -20.8681 222.46 -22.6168 228.287 -22.498C234.114 -22.3793 239.765 -20.3991 244.42 -16.8453C249.074 -13.2915 252.49 -8.34889 254.172 -2.73401L464.023 514.096C486.99 560.548 455.981 576.243 433.471 565.67C389.717 531.292 323.756 507.256 248.239 501.19C256.779 497.074 264.141 490.867 269.65 483.135C324.916 394.698 255.146 345.329 223.885 261.913C190.493 343.904 119.416 390.601 172.33 481.153C177.485 488.891 184.448 495.248 192.606 499.663L193.374 500.098C118.256 503.159 52.009 524.564 7.49065 556.91C-15.3566 566.812 -45.721 549.795 -21.539 504.277Z" fill="#fff"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M-41.2512 683.625C-105.378 816.032 -117.659 967.783 -80.8019 981.925C-36.1024 998.938 -48.6139 948.338 11.7348 970.319C72.0835 992.3 93.7677 1127.05 212.951 1135.12C332.355 1131.86 357.49 998.169 418.454 978.504C479.419 958.838 465.609 1008.94 510.635 993.615C547.747 981.095 539.486 828.95 478.965 694.024C434.065 593.982 350.41 552.059 247.224 544.251C263.817 557.314 279.009 594.028 272.371 699.683C263.144 847.219 232.578 920.68 215.689 920.113C198.801 919.546 170.211 845.321 164.885 697.513C161.069 591.629 177.157 555.579 194.138 543.166C91.0013 546.934 6.23919 585.451 -41.2512 683.625Z" fill="#fff"/>
              </svg>
            </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>

export default {
  data() {
    return {
      activeSlide: 1,
      slideAmount: 7,
      transitionDelay: 500,
      delay: false,
      stopPropagation: true,
    }
  },
  watch: {
    activeSlide: function(val) {
      let slides = document.querySelectorAll('.w-slide');
      let activeSlideEl = slides[val - 1];

      // Remove active class from prev slide
      Array.from(slides).map(slide => {
        slide.classList.remove('active');
        console.log('remove');
      })

      // Add active class on change slide
      activeSlideEl.classList.add('active');
    }
  },
  mounted() {
    const wSlider = document.querySelector('.w-slider');

    wSlider.addEventListener("wheel" , (e) => this.onWheel(e))
  },
  methods: {
    onWheel: function (e) {
      // Stop v-slider wheel propagation
      if(this.stopPropagation || this.activeSlide !== 1){
        e.stopPropagation()
      }

      // Change slide with delay
      if(!this.delay){
        if(e.deltaY < 0){
          if(this.activeSlide > 1){
            this.activeSlide = this.activeSlide - 1;
          }
        } else {
          if(this.activeSlide < this.slideAmount){
            this.activeSlide = this.activeSlide + 1;
          }
        }
        this.delay = true;
        setTimeout(() => {
          this.delay = false;
        }, this.transitionDelay * 2)
      }

      // Set timeout on swipe to h-slider
      if(this.activeSlide === 1 && this.stopPropagation){
        setTimeout(() => {
          this.stopPropagation = false;
        }, this.transitionDelay * 2);
      }else {
        this.stopPropagation = true;
      }
    }
  }
}
</script>

<style>
</style>